<?php
include_once "../../assets/php/var.php";

// vérifier que l'on soit connecté pour accéder aux pages sinon retour vers index
(!$is_connected)?header('Location: ../../index.html'):"";
?>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Création d'une fiche véhicule</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="../../css/pages/database/vehicule_creation.css">
</head>

<body class="">
    <!-- insertion of standard header -->
    <?php include_once("../../assets/std_page/header.html") ?>

    <!-- insertion of standard navbar -->
    <?php include_once("../../assets/std_page/nav_bar.html") ?>

    <main class="mb-5">
        <div class="card">
            <div class="card-header">
                <h1 class="title fw-bold">Formulaire de visualisation des vehicules</h1>
        </div>

            <div class="introCard">
                <div class="formDiv">
                    <legend>Identification du véhicule</legend>
                    <div class="form-group">
                        <label>
                            <i class="bi bi-chevron-bar-right"></i>
                            Numéro de plaque</label> <div>$VARIABLE_PLAQUE</div>
                    </div>
                    <div class="form-group">
                        <label>
                            <i class="bi bi-chevron-bar-right"></i>
                            Marque du véhicule</label><div>$VARIABLE_Marque vehicule</div>
                    </div>
                    <div class="form-group">
                        <label>
                            <i class="bi bi-chevron-bar-right"></i>
                            Modèle du véhicule</label><div>$VARIABLE_modele</div>
                    </div>
                </div>
            </div>

            <div class="formDiv mt-4">
                <legend>Conditions d'exploitation du véhicule étudié</legend>
                <div class="form-group">
                    <label>
                        <i class="bi bi-chevron-bar-right"></i>
                        Kilométrage annuel moyen du véhicule moteur (km)</label>
                    <input type="number" placeholder="Entrer le kilométrage annuel moyen du véhicule moteur"
                        name="average_km" >
                </div>
                <div class="form-group">
                    <label class="secondLabel">
                        <i class="bi bi-chevron-bar-right"></i>
                        <p class="m-0">Dont kilométrage en charge (km)</p>
                    </label>
                    <input type="number" placeholder="Entrer le nombre de kilométrage en charge"
                        name="average_km_loaded" >
                </div>
                <div class="form-group">
                    <label>
                        <i class="bi bi-chevron-bar-right"></i>
                        Nombre de véhicules tractés pour un véhicule moteur</label>
                    <input type="number" placeholder="Entrer le nombre de véhicules tractés"
                        name="nb_towed_vehicule" >
                </div>
                <div class="form-group">
                    <label>
                        <i class="bi bi-chevron-bar-right"></i>
                        Plaque d'immatriculation du véhicule tracté</label>
                    <input type="text"
                        placeholder="Entrer la plaque d'immatriculation du véhicule tracté" name="towed_vehicule_plate" >
                </div>
                <div class="form-group">
                    <label>
                        <i class="bi bi-chevron-bar-right"></i>
                        Nombre de jours d'exploitation du véhicule moteur par an</label>
                    <input type="number" placeholder="Entrer le nombre de jours d'exploitation"
                        name="days_used_year" >
                </div>
                <div class="form-group">
                    <label>
                        <i class="bi bi-chevron-bar-right"></i>
                        Unité de chargement (texte libre)</label>
                    <input type="text" placeholder="Entrer l'unité de chargement" name="load_unit" >
                </div>
                <div class="form-group">
                    <label>
                        <i class="bi bi-chevron-bar-right"></i>
                        Capacité de chargement (correspondant à l'unité ci-dessus)</label>
                    <input type="number" placeholder="Entrer la capacité de chargement" name="load_capacity"
                        >
                </div>
                <div class="form-group">
                    <label>
                        <i class="bi bi-chevron-bar-right"></i>
                        Coefficient d'utilisation de cette capacité (%)</label>
                    <input type="number"
                        placeholder="Entrer le coefficient d'utilisation de cette capacité"
                        name="capacity_use_percentage" >
                </div>
            </div>

            <div class="formDiv">
                <legend>Coûts variables kilométriques du véhicule étudié</legend>
                <div>
                    <h3>1- Carburant</h3>
                    <div class="form-group">
                        <label>
                            <i class="bi bi-chevron-bar-right"></i>
                            Type d'énergie du véhicule</label>
                        <input type="text" placeholder="Entrer le type d'énergie du véhicule"
                            name="number" >
                    </div>
                    <div class="form-group">
                        <label> <i class="bi bi-chevron-bar-right"></i>
                            Consommation du véhicule (litre pour 100 km)</label>
                        <input type="number" placeholder="Entrer la consomation du véhicule" name="consumption"
                            >
                        <!-- Pas prix en compte. Frais fixe mis à jour ailleurs (avec les pneus etc) 
                            <label>Prix moyen de l'énergie sur route (hors toutes taxes récupérables) (€)</label>
                        <input type="password" placeholder="Entrer le mot de passe" name="password" > -->
                    </div>
                    <div class="form-group">
                        <label> <i class="bi bi-chevron-bar-right"></i>
                            Part de l'approvisionnement citerne (%)</label>
                        <input type="number"
                            placeholder="Entrer la part de l'approvisionnement citerne"
                            name="cistern_percentage_use" >
                        <!-- Pas prix en compte. Frais fixe mis à jour ailleurs
                            label>Prix moyen du litre de Gazole citerne (hors toutes taxes récupérables) (€)</label>
                        <input type="password" placeholder="Entrer le mot de passe" name="password" >  -->
                    </div>
                </div>

                <div>
                    <h3>2- Pneumatiques</h3>
                    <div class="form-group">
                        <label> <i class="bi bi-chevron-bar-right"></i>
                            Nombre de pneus du véhicule moteur</label>
                        <input type="number" placeholder="Entrer le nombre de pneus du véhicule moteur"
                            name="nb_tires" >
                    </div>
                    <div class="form-group">
                        <label> <i class="bi bi-chevron-bar-right"></i>
                            Nombre de pneus du véhicule tracté</label>
                        <input type="number" placeholder="Entrer le nombre de pneus du véhicule tracté"
                            name="towed_nb_tires" >
                    </div>
                    <div class="form-group">
                        <label> <i class="bi bi-chevron-bar-right"></i>
                            Type de pneus</label>
                        <input type="number" placeholder="Entrer le type de pneus utilisés" name="tires_brand"
                            >
                    </div>
                </div>

                <div>
                    <h3>3- Entretien - réparation</h3>
                    <div class="form-group">
                        <label> <i class="bi bi-chevron-bar-right"></i>
                            Dépenses annuelles d'entretien-réparations par véhicule (€)</label>
                        <input type="number"
                            placeholder="Entrer les dépenses annuelles d'entretien-réparations"
                            name="annual_maintenance_cost" >
                    </div>
                </div>

                <div>
                    <h3>4- Péages</h3>
                    <div class="form-group">
                        <label> <i class="bi bi-chevron-bar-right"></i>
                            Dépenses annuelles de péages (€)</label>
                        <input type="number" placeholder="Entrer les dépenses annuelles de péages"
                            name="annual_toll_cost" >
                    </div>
                </div>
            </div>

            <div class="formDiv">
                <legend>Coûts fixes journaliers du véhicule étudié</legend>
                <div>
                    <h3>1 - Conditions de détention et de financement du véhicule moteur</h3>
                    <div class="form-group">
                        <label> <i class="bi bi-chevron-bar-right"></i>
                            Durée d'utilisation du véhicule moteur (ans)</label>
                        <input type="number"
                            placeholder="Entrer la durée d'utilisation du véhicule moteur (ans)"
                            name="days_used_year" >
                    </div>
                    <div class="form-group">
                        <label> <i class="bi bi-chevron-bar-right"></i>
                            Mode de financement du véhicule moteur</label>
                        <select id="firstSelect" class="form-select mb-4" aria-label="Default select example" name="payment_type">
                            <option selected>Choisir...</option>
                            <option value="1">Emprunt</option>
                            <option value="2">Auto-financement</option>
                            <option value="3">Crédit Bail</option>
                            <option value="4">Location Financière</option>
                        </select>
                    </div>
                    <!-- entrée dans une condition en fonction du mode de financement-->
                    <div class="form-group">
                        <!-- cas de l'emprunt -->
                        <div id="firstSelectEmprunt">
                            <legend class="emprunt">
                                <i class="bi bi-arrow-right-circle-fill"></i>
                                <p class="m-0">Emprunt</p>
                            </legend>
                            <div class="form-group">
                                <label> <i class="bi bi-chevron-bar-right"></i>
                                    Valeur du véhicule moteur (€)</label>
                                <input type="number" placeholder="Entrer la valeur du véhicule moteur"
                                    name="vehicule_cost" >
                            </div>
                            <div class="form-group">
                                <label> <i class="bi bi-chevron-bar-right"></i>
                                    Montant de l'emprunt (€)</label>
                                <input type="number" placeholder="Entrer le montant de l'emprunt"
                                    name="loan_value" >
                            </div>
                            <div class="form-group">
                                <label> <i class="bi bi-chevron-bar-right"></i>
                                    Taux d'intérêt de l'emprunt (%)</label>
                                <input type="number" placeholder="Entrer le taux d'intérêt de l'emprunt (%)"
                                    name="loan_rate" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Durée de l'emprunt (mois)</label>
                                <input type="number" placeholder="Entrer la durée de l'emprunt"
                                    name="payment_term" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Valeur de revente (€)</label>
                                <input type="number" placeholder="Entrer la valeur de revente (€)"
                                    name="resell_cost" >
                            </div>
                        </div>
                        <!-- cas de l'autofinancement -->
                        <div id="firstSelectAutofinancement">
                            <legend class="autofinancement">
                                <i class="bi bi-arrow-right-circle-fill"></i>
                                <p class="m-0">Auto-financement</p>
                            </legend>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Valeur du véhicule moteur (€)</label>
                                <input type="number" placeholder="Entrer la valeur du véhicule moteur"
                                    name="vehicule_cost" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Montant de l'emprunt (€)</label> <!-- egal à 0 à cacher -->
                                <input type="number" placeholder="Entrer le montant de l'emprunt"
                                    name="loan_value" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Taux d'intérêt de l'emprunt (%)</label>
                                <input type="number" placeholder="Entrer la durée de l'emprunt"
                                    name="payment_term" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Valeur de revente (€)</label>
                                <input type="number" placeholder="Entrer la valeur de revente (€)"
                                    name="resell_cost" >
                            </div>
                        </div>
                        <!-- cas du crédit bail -->
                        <div id="firstSelectCreditBail">
                            <legend class="credit-bail">
                                <i class="bi bi-arrow-right-circle-fill"></i>
                                <p class="m-0">Crédit-bail</p>
                            </legend>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Valeur du véhicule moteur (€)</label>
                                <input type="number" placeholder="Entrer la valeur du véhicule moteur"
                                    name="vehicule_cost" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Durée du contrat (mois)</label>
                                <input type="number" placeholder="Entrer la durée du contrat" name="loan_value"
                                    >
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Montant mensuel du loyer (€)</label>
                                <input type="number" placeholder="Entrer le montant mensuel du loyer"
                                    name="monthly_cost" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Valeur optionnelle d'achat (€)</label>
                                <input type="number"
                                    placeholder="Entrer la valeur optionnelle d'achat (€)"
                                    name="optional_buying_value" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Valeur de revente (€)</label>
                                <input type="number" placeholder="Entrer la valeur de revente (€)"
                                    name="resell_cost" >
                            </div>
                        </div>
                        <!-- cas de la location financière -->
                        <div id="firstSelectLocFinanciere">
                            <legend class="location-financiere">
                                <i class="bi bi-arrow-right-circle-fill"></i>
                                <p class="m-0">location-financière</p>
                            </legend>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Durée du contrat (mois)</label>
                                <input type="number" placeholder="Entrer la durée du contrat" name="loan_value"
                                    >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Montant mensuel du loyer (€)</label>
                                <input type="number" placeholder="Entrer le montant mensuel du loyer"
                                    name="monthly_cost" >
                            </div>
                        </div>
                    </div>
                </div>


                <div>
                    <h3>2 - Conditions de détention et de financement du véhicule tracté</h3>
                    <!-- Idem à prcédemment mais avec tracté au lieu de moteur ==> faire une boucle ?-->
                    <!-- Note: à afficher seulement si le véhicule moteur a un véhicule tracté-->
                    <div class="form-group">
                        <label><i class="bi bi-chevron-bar-right"></i>
                            Durée d'utilisation du véhicule tractés (ans)</label>
                        <input type="number"
                            placeholder="Entrer la durée d'utilisation du véhicule moteur (ans)"
                            name="towed_days_used_year" >
                    </div>
                    <div class="form-group">
                        <label><i class="bi bi-chevron-bar-right"></i>
                            Mode de financement du véhicule moteur</label>
                        <select id="secondSelect" class="form-select" aria-label="Default select example" name="towed_payment_type">
                            <option selected>Choisir...</option>
                            <option value="5">Emprunt</option>
                            <option value="6">Auto-financement</option>
                            <option value="7">Crédit Bail</option>
                            <option value="8">Location Financière</option>
                        </select>
                    </div>
                    <!-- entrée dans une condition en fonction du mode de financement-->
                    <div class="form-group">
                        <!-- cas de l'emprunt -->
                        <div id="secondSelectEmprunt">
                            <legend class="emprunt">
                                <i class="bi bi-arrow-right-circle-fill"></i>
                                <p class="m-0">emprunt</p>
                            </legend>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Valeur du véhicule moteur (€)</label>
                                <input type="number" placeholder="Entrer la valeur du véhicule moteur"
                                    name="towed_vehicule_cost" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Montant de l'emprunt (€)</label>
                                <input type="number" placeholder="Entrer le montant de l'emprunt"
                                    name="towed_loan_value" >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Taux d'intérêt de l'emprunt (%)</label>
                                <input type="number"
                                    placeholder="Entrer le taux d'intérêt de l'emprunt (%)" name="towed_loan_rate"
                                    >
                            </div>
                            <div class="form-group">
                                <label><i class="bi bi-chevron-bar-right"></i>
                                    Durée de l'emprunt (mois)</label>
                                <input type="number" placeholder="Entrer la durée de l'emprunt"
                                    name="towed_payment_term" >
                            </div>
                            <div class="form-group">
                                <label>Valeur de revente (€)</label>
                                <input type="number" placeholder="Entrer la valeur de revente (€)"
                                    name="towed_resell_cost" >
                            </div>
                        </div>
                    </div>

                    <!-- cas de l'autofinancement -->
                    <div id="secondSelectAutofinancement">
                        <legend class="autofinancement">
                            <i class="bi bi-arrow-right-circle-fill"></i>
                            <p class="m-0">autofinancement</p>
                        </legend>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Valeur du véhicule moteur (€)</label>
                            <input type="number" placeholder="Entrer la valeur du véhicule moteur"
                                name="towed_vehicule_cost" >
                        </div>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Taux d'intérêt de l'emprunt (%)</label>
                            <input type="number" placeholder="Entrer la durée de l'emprunt"
                                name="towed_payment_term" >
                        </div>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Valeur de revente (€)</label>
                            <input type="number" placeholder="Entrer la valeur de revente (€)"
                                name="towed_resell_cost" >
                        </div>
                    </div>

                    <!-- cas du crédit bail -->
                    <div id="secondSelectCreditBail">
                        <legend class="credit-bail">
                            <i class="bi bi-arrow-right-circle-fill"></i>
                            <p class="m-0">crédit-bail</p>
                        </legend>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Valeur du véhicule moteur (€)</label>
                            <input type="towed_vehicule_cost" placeholder="Entrer la valeur du véhicule moteur"
                                name="towed_vehicule_cost" >
                        </div>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Durée du contrat (mois)</label>
                            <input type="towed_loan_value" placeholder="Entrer la durée du contrat"
                                name="towed_loan_value" >
                        </div>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Montant mensuel du loyer (€)</label>
                            <input type="towed_monthly_cost" placeholder="Entrer le montant mensuel du loyer"
                                name="towed_monthly_cost" >
                        </div>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Valeur optionnelle d'achat (€)</label>
                            <input type="towed_optional_buying_value"
                                placeholder="Entrer la valeur optionnelle d'achat (€)"
                                name="towed_optional_buying_value" >
                        </div>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Valeur de revente (€)</label>
                            <input type="towed_resell_cost" placeholder="Entrer la valeur de revente (€)"
                                name="towed_resell_cost" >
                        </div>
                    </div>

                    <!-- cas de la location financière -->
                    <div id="secondSelectLocFinanciere">
                        <legend class="location-financiere">
                            <i class="bi bi-arrow-right-circle-fill"></i>
                            <p class="m-0">location-financière</p>
                        </legend>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Durée du contrat (mois)</label>
                            <input type="towed_loan_value" placeholder="Entrer la durée du contrat"
                                name="towed_loan_value" >
                        </div>
                        <div class="form-group">
                            <label><i class="bi bi-chevron-bar-right"></i>
                                Montant mensuel du loyer (€)</label>
                            <input type="towed_monthly_cost" placeholder="Entrer le montant mensuel du loyer"
                                name="towed_monthly_cost" >
                        </div>
                    </div>
                </div>
            </div>

            <div class="formDiv">
                <h3>3 - Assurances du véhicule</h3>
                <div class="form-group">
                    <label><i class="bi bi-chevron-bar-right"></i>
                        Montant annuel de l'assurance d'un véhicule RC + VI (€/an)</label>
                    <input type="annual_vehic_insurance_cost"
                        placeholder="Entrer le montant annuel de l'assurance d'un véhicule RC + VI"
                        name="annual_vehic_insurance_cost" >
                </div>
                <div class="form-group">
                    <label><i class="bi bi-chevron-bar-right"></i>
                        Montant annuel de l'assurance marchandises transportées par véhicule
                        (€/an)</label>
                    <input type="annual_load_insurance_cost"
                        placeholder="Entrer le montant annuel de l'assurance marchandises"
                        name="annual_load_insurance_cost" >
                </div>
            </div>

            <div class="formDiv">
                <h3>4 - Taxe à l'essieu par véhicule</h3>
                <div class="form-group">
                    <label><i class="bi bi-chevron-bar-right"></i>
                        Montant annuel de taxe à l'essieu (€/an)</label>
                    <input type="axles_tax_cost" placeholder="Entrer le montant annuel de taxe à l'essieu"
                        name="axles_tax_cost" >
                </div>
            </div>

            <div class="formDiv">
                <h3>5 - Coûts de structure par véhicule</h3>
                <div class="form-group">
                    <label><i class="bi bi-chevron-bar-right"></i>
                        Montant annuel des coûts de structure par véhicule (€/an)</label>
                    <input type="annual_structure_cost"
                        placeholder="Entrer le montant annuel des coûts de structure par véhicule"
                        name="annual_structure_cost" >
                </div>
            </div>

            <div class="formDiv">
                <legend>Autre coût (lié au transport où non) à inclure dans la recomposition
                </legend>
                <div class="form-group">
                    <label><i class="bi bi-chevron-bar-right"></i>
                        Libellé de la composante de coût (texte libre)</label>
                    <input type="other_cost_name" placeholder="Entrer le libellé de la composante de coût"
                        name="other_cost_name">
                </div>
                <div class="form-group">
                    <label><i class="bi bi-chevron-bar-right"></i>
                        Unité d'œuvre correspondant (texte libre)</label>
                    <input type="other_cost_unit" placeholder="Entrer l'unité d'œuvre correspondant"
                        name="other_cost_unit">
                </div>
                <div class="form-group">
                    <label><i class="bi bi-chevron-bar-right"></i>
                        Nombre d'unité utilisé par an</label>
                    <input type="annual_unit_value" placeholder="Entrer le nombre d'unités utilisé par an"
                        name="annual_unit_value">
                </div>
                <div class="form-group">
                    <label><i class="bi bi-chevron-bar-right"></i>
                        Montant annuel imputable à ce coût (€/an)</label>
                    <input type="annual_other_cost_value" placeholder="Entrer le montant annuel imputable à ce coût"
                        name="annual_other_cost_value">
                </div>
            </div>

            <!-- Validation des données -->
            <div class="btnDiv">
                <button class="btn submitBtn" type="submit" id='submit' value='ENVOYER'>Envoyer</button>
            </div>

        </div>

    </main>

    <!-- insertion of standard header -->
    <?php include_once("../../assets/std_page/footer.html") ?>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="../../js/script.js"></script>
    <script src="../../js/vehicule_creation.js"></script>
</body>

</html>